import React, {useState} from 'react';
import { Link } from 'react-router-dom';
import { Panel, PanelHeader, PanelBody } from '../../../components/panel/panel.jsx';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import {projectData} from '../../../data/projectdata.jsx';


function Clients_Projects() {
	const statusOrder = ['Active', 'In progress', 'Completed'];
	const [filter, setFilter] = useState('All');
	const [activeButton, setActiveButton] = useState('All');

	const filteredAndSortedProjects = projectData
    .filter((project) => {
      if (filter === 'All') return true; // Show all projects
      return project.status === filter; // Show only matching status
    })
    .sort((a, b) => statusOrder.indexOf(a.status) - statusOrder.indexOf(b.status));

	return (
		<div>
			<h1 className="page-header">Dashboard</h1>
			<div className="d-flex mb-4">
				<button onClick={() => {setFilter('All'); setActiveButton('All');}} 
				className={`btn btn-default btn-block mx ${activeButton === 'All' ? 'shadow' : ''}`} 
				style={{ width: '100px', height: '30px', textAlign: 'center', marginRight: '0.5rem' }}
				>
					All
				</button>
				<button onClick={() => {setFilter('Active'); setActiveButton('Active');}} 
				className={`btn btn-green mx-2 ${activeButton === 'Active' ? 'shadow' : ''}`} 
				style={{ width: '100px', height: '30px' }}>
					Active
				</button>
				<button onClick={() => {setFilter('In progress'); setActiveButton('In progress');}} 
				className={`btn btn-warning mx-2 ${activeButton === 'In progress' ? 'shadow' : ''}`} 
				style={{ width: '100px', height: '30px' }}>
					Inprogress
				</button>
				<button onClick={() => {setFilter('Completed'); setActiveButton('Completed');}} 
				className={`btn btn-primary mx-2 ${activeButton === 'Completed' ? 'shadow' : ''}`} 
				style={{ width: '100px', height: '30px' }}>
					Completed
				</button>
			</div>
			<Panel>
				<PanelHeader>Projects</PanelHeader>
				<PanelBody>
					<table className="table table-bordered widget-table widget-table-rounded">
						<thead>
							<tr className="text-center">
								<th width="1%">Type</th>
								<th>Project Name</th>
								<th>Start Date</th>
								<th>End Date</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{filteredAndSortedProjects.map((project, index) => (
								<tr key={index}>
									<td className="text-center">
										<FontAwesomeIcon icon={project.typeIcon} aria-hidden="true" />
									</td>
									<td>
										<h5>{project.projectName}</h5>
										<p className="fs-11px text-gray-600 fw-bold mb-3 text-justify">{project.description}</p>
										<div className="progress h-10px rounded-pill mb-5px">
											<div
												className={`progress-bar progress-bar-striped progress-bar-animated fs-10px fw-bold bg-${
													project.status === 'Active' ? 'green' : project.status === 'In progress' ? 'warning' : 'blue'
												  }`}
												style={{ width: `${project.progress}%` }}
											>
												{project.progress}%
											</div>
										</div>
										<div className="clearfix fs-10px">
											Status: <b className="text-body">{project.status}</b>
										</div>
									</td>
									<td className="text-nowrap align-middle text-center">
										<b className="text-body">{project.startDate}</b>
									</td>
									<td className="mt-5 text-center align-middle">{project.endDate}</td>
									<td className="d-flex justify-content-center align-items-center" style={{ height: '100px' }}>
										<Link to={`/Kanban Board/Projects details/project-details/${project.id}`} className="btn btn-default btn-sm w-80px rounded-pill">
											View
										</Link>
									</td>
								</tr>
							))}
						</tbody>
					</table>
				</PanelBody>
			</Panel>
		</div>
	);
};

export default Clients_Projects;

